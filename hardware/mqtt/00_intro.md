# MQTT

![banner.svg](images/banner.svg)

## 什么是 MQTT？

MQTT（Message Queuing Telemetry Transport，消息队列遥测传输）是一种基于 TCP/IP 的机器对机器的“物联网”连接协议。

它是一种轻量级的、开放的、基于发布/订阅模式的消息传输协议，旨在用于低带宽、不稳定网络环境下的物联网通信。它最初由IBM开发，现已成为物联网设备之间广泛使用的标准通信协议之一。

MQTT 的核心思想是发布者（Publisher）和订阅者（Subscriber）模型。在 MQTT
中，消息发送方称为发布者，消息接收方称为订阅者。发布者将消息发布到特定的主题（Topic），而订阅者则订阅感兴趣的主题。发布者和订阅者之间通过一个中间代理服务器（Broker）进行通信。

## Why MQTT？

作为物联网下的通信协议，它具有 HTTP 所不可比拟的优势。包括：

- 轻量级：MQTT 协议设计简单，消息头部信息很小，适合在资源受限的设备上使用，且网络开销较小。
- 灵活的发布/订阅模型：发布者和订阅者之间解耦，可以灵活地定义主题，方便消息的定向传递。
- 消息传输可靠性：MQTT 协议支持不同级别的服务质量（QoS），可以根据需求选择消息传输的可靠性。
- 支持持久性会话和遗嘱消息：MQTT 客户端可以选择保持持久性会话，以确保消息不会丢失，并且可以设置遗嘱消息，在客户端断开连接时发送给订阅者。
- 安全性：MQTT 协议支持基于 TLS/SSL 的加密传输和基于用户名密码的身份验证，确保通信的安全性。
  由于其简单、灵活、可靠和安全的特性，MQTT 在物联网领域得到了广泛的应用，包括传感器数据采集、智能家居、工业自动化等场景。

## MQTT Broker

MQTT Broker 是 MQTT 协议中的一个重要组件，用于中介和管理 MQTT 消息的传输。它充当了消息的中转站，负责接收、路由和转发消息，以及维护与客户端之间的连接。

其主要功能包括：

- 接收和存储来自 MQTT 客户端的消息。
- 路由消息到正确的目的地，确保消息被正确地传送到订阅者。
- 管理连接和会话，维护客户端与服务器之间的通信状态。
- 实现 QoS（Quality of Service）级别，确保消息按照指定的服务质量级别进行传输。
- 处理订阅和发布操作，以及订阅列表的维护。

常见的 MQTT Broker 包括 Eclipse Mosquitto、EMQ、HiveMQ、VerneMQ 等。

这些 Broker 可以在服务器、云平台或嵌入式设备上部署，并提供了丰富的功能和配置选项，以满足不同应用场景的需求。
