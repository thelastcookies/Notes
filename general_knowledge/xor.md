# XOR 异或运算

![xor__banner.svg](../static/images/general_knowledge/xor__banner.svg)

## 什么是异或运算

在数字逻辑中，逻辑算符异或（英语：Exclusive OR）是对两个运算元的一种逻辑分析类型。与一般的逻辑或不同，当两两数值相同时为否，而数值不同时为真。

对于命题 p, q，`p异或q`通常记作`p XOR q` 或 `p ⊕ q`。在编程语言中，常写作 `p ^ q`（本文中采取此种写法）。

异或是与`与`、`或`、`非`并列的逻辑运算，在计算机科学中有着非常重要的地位。

## 真值表

| p     | q     | p ^ q |
|-------|-------|-------|
| True  | True  | False |
| True  | False | True  |
| False | True  | True  |
| False | False | False |

## 运算规则

```
**交换律**：p ^ q = q ^ p
**结合律**：p ^ (q ^ r) = (p ^ q) ^ r
**恒等率**：p ^ 0 = p
**归零率**：p ^ p = 0
**自反**：p ^ q ^ q = p ^ 0 = p
```

## 如何理解异或运算

- 异或运算是一种寻找差异的运算，可以用常见的"找不同"游戏来理解。异或运算的作用就是帮我们从两堆相似的信息中发现一些不同的信息。而又因为相同的信息往往
是已知的旧信息，而不同的信息是未知的新信息，这是一个寻找信息增量的过程。
- 异或运算高度对称，凭借这条特性，异或运算广泛应用在在校验、加密等场合。

## 应用

### 数字电路
#### 加法器
从异或运算的真值表可以发现，异或运算是没有进位的二进制加运算。所以一个"与门"和一个"异或门"可以形成"一位半加器"，它可以计算两个一位数的加法并给出进位。
将两个"一位半加器"合起来，能够形成一个“一位全加器”，它可以接收低位的进位，计算加法并给出进位。

多个"一位全加器"合起来，就能实现最基本的加法运算了。
比如用八个"一位全加器"，就能实现255以内的加法运算；用十六个就能实现0-65535以内的加法运算等等。

### 自然界中的异或运算

绝大部分动物对运动的物体比较敏感，这就是因为他们时刻关注周围的环境信息，把变化幅度小的环境信息忽略掉，而专注于那些有差异较大的信息。因为一般来说，静止
是安全的，运动的很可能是危险的，是需要高度警觉的。而这些本质上就是一种对于视觉图像的异或运算，这对于绝大多数动物来说性命攸关。

### 计算机图形学中的异或运算

和上面的示例类似，同样的道理可以用在计算机中的图像处理。通过对两张图像进行异或运算，可以发现图像中的不同之处。这就是利用计算机图形学的基础。

### 去除冗余信息（压缩）

例如视频文件是由很多图片帧组成的，相邻的帧之间有很多重复的数据，我们可以用异或计算来把冗余的数据去除，只留下帧与帧之间的不同数据。同样可以通过异或运算
逆向把每帧的内容补全，从而完成解压缩。

### 异或校验

数据 x 和数据 y 进行异或运算，产生一个校验数据 z。

将校验数据与任一份数据进行异或运算，可以还原另一份数据。

异或校验可以用于数据备份。

### 密码学

异或运算可以用于加密。

将明文（message）与密钥（key）进行异或运算，可以得到密文（cipherText）。

```
message ^ key = cipherText
```

再将密文与密钥再次进行异或运算，就可以还原成明文。

```
cipherText ^ key = message
```
